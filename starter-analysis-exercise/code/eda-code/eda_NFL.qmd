---
title: "eda3"
author: "Nicholas Stevenson"
format: html
date: today
---



```{r, warning=FALSE}
#load needed packages. make sure they are installed.
library(readxl)
library(here) 
library(dplyr)
library(skimr)
library(ggplot2)
```

Load the data.
```{r}
# path to data
# note the use of the here() package and not absolute paths
NFL_data <- here::here("starter-analysis-exercise","data","raw-data","NFL_data.xlsx")
rawdata <- readxl::read_excel(NFL_data)
```

# Check data

First we can look at the Stats

```{r}
Stats <- readxl::read_excel(NFL_data, sheet ="Stats")
print(Stats)
```

Next, we will look at the Salary expenditure.

```{r}
Salary <- readxl::read_excel(NFL_data, sheet ="Salary")
print(Salary)
```

# Data exploration through tables
Showing a bit of code to produce and save a summary table.
```{r}
summary_df = skimr::skim(Stats)
print(summary_df)
# save to file
summarytable_file = here("starter-analysis-exercise","results", "tables-files", "summarytable.rds")
saveRDS(summary_df, file = summarytable_file)
```

```{r}
summary_df2 = skimr::skim(Salary)
print(summary_df2)
# save to file
summarytable_file2 = here("starter-analysis-exercise","results", "tables-files", "summarytable.rds")
saveRDS(summary_df2, file = summarytable_file2)
```

We are saving the results to the `results/tables` folder. Structure the folders inside `results` such that they make sense for your specific analysis. Provide enough documentation that someone can understand what you are doing and what goes where. `readme.md` files inside each folder are a good idea.

# Data exploration through figures

Histogram plots for the continuous outcomes. 

Wins first.

```{r}
p1 <- Stats %>% 
  ggplot(aes(x=Wins)) +
  geom_bar(fill="steel blue") 

figure_file = here("starter-analysis-exercise","results","figures","wins-distribution.png")
ggsave(filename = figure_file, plot=p1) 

print(p1)
```

Now Active Salary.
```{r}
p2 <- Salary %>% 
  ggplot(aes(x=reorder(Team, `ACTIVE53-MAN`), y = `ACTIVE53-MAN`)) +
  geom_bar(stat = "identity", fill="darkgreen") +
  coord_flip() +
  labs(title = "Active Salary by Team", x = "Team", y = "Active Salary")

figure_file2 = here("starter-analysis-exercise","results","figures","active-salary-distribution.png")
ggsave(filename = figure_file2, plot=p2)

print(p2)
```

